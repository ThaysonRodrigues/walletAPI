# ğŸ’° Wallet API

![Java](https://img.shields.io/badge/Java-8-orange)
![Spring Boot](https://img.shields.io/badge/Spring%20Boot-2.3.4-brightgreen)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15-blue)
![Docker](https://img.shields.io/badge/Docker-Enabled-blue)
![License](https://img.shields.io/badge/License-MIT-lightgrey)

API REST para controle de carteira financeira, desenvolvida com **Spring Boot**, **Java 8** e **PostgreSQL**, utilizando boas prÃ¡ticas de arquitetura, seguranÃ§a e versionamento de banco.

---

## ğŸ“˜ Trabalho Engineering Software Development

Este trabalho foi desenvolvido com base na construÃ§Ã£o de um **Test Suite**, com o objetivo de validar o correto funcionamento do microsserviÃ§o por meio de testes automatizados.

### ğŸ“ OrganizaÃ§Ã£o da estrutura de testes
```
src/test/java
 â””â”€â”€ com.wallet
     â”œâ”€â”€ controller
     â”‚   â””â”€â”€ UserControllerTest.java
     â”œâ”€â”€ repository
     â”‚   â””â”€â”€ UserRepositoryTest.java
     |   â””â”€â”€ WalletItemRepositoryTest      
     â””â”€â”€ service
         â””â”€â”€ UserServiceTest.java
         â””â”€â”€ WalletItemServiceTest.java
```
---

## ğŸ“‹ Funcionalidades

- âœ… CRUD de usuÃ¡rios
- ğŸ” AutenticaÃ§Ã£o e autorizaÃ§Ã£o com **JWT**
- ğŸ—„ï¸ PersistÃªncia com **Spring Data JPA**
- ğŸ”„ Versionamento de banco com **Flyway**
- âš¡ Cache com **EhCache**
- ğŸ“„ DocumentaÃ§Ã£o automÃ¡tica com **Swagger**
- ğŸ§ª Testes com **JUnit** e **Mockito**
- ğŸ³ ExecuÃ§Ã£o local via **Docker + Docker Compose**

---

## ğŸ§± Tecnologias utilizadas

- Java 8
- Spring Boot 2.3.4
- Spring Security
- Spring Data JPA
- PostgreSQL
- Flyway
- Lombok
- Swagger (Springfox)
- EhCache
- Docker & Docker Compose
- Maven

---

## ğŸ“‚ Estrutura do projeto (simplificada)

```text
root/
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ docker-compose.yml
â”œâ”€â”€ src/
â”œâ”€â”€ pom.xml
â””â”€â”€ README.md
```

---

## ğŸš€ Como executar a aplicaÃ§Ã£o (Docker)
### ğŸ”§ PrÃ©-requisitos

Antes de comeÃ§ar, vocÃª precisa ter instalado na sua mÃ¡quina:

- âœ… Docker  
- âœ… Docker Compose  
- âœ… Git  

---

## 1ï¸âƒ£ Clonar o repositÃ³rio
```
git clone https://github.com/ThaysonRodrigues/walletAPI.git
cd walletAPI
```

---

## 2ï¸âƒ£ Acessar a pasta do Docker
```
cd docker
```

---

## 3ï¸âƒ£ Buildar e subir a aplicaÃ§Ã£o
```
docker compose up -d --build
```

ğŸ“Œ **Esse comando irÃ¡:**
- Buildar a aplicaÃ§Ã£o Java via Dockerfile
- Subir o PostgreSQL
- Subir a Wallet API
- Executar as migrations automaticamente com Flyway  

---

## 4ï¸âƒ£ Verificar containers em execuÃ§Ã£o
```
docker compose ps
```

---

## ğŸ” AutenticaÃ§Ã£o
### â• Criar usuÃ¡rio

**Endpoint:**
```http
POST /v1/user
{
  "name": "UsuÃ¡rio Teste",
  "email": "user@email.com",
  "password": "123456"
}
```

---

## ğŸ”‘ Autenticar e obter token JWT
**Endpoint:**
```http
POST /v1/auth
{
  "email": "user@email.com",
  "password": "123456"
}
```
ğŸ“Œ **O token retornado deve ser enviado no header:**

```http
Authorization: Bearer <seu_token_jwt>
```

---

## ğŸ§ª Executar testes
```
mvn test
```

---

## ğŸ›‘ Parar a aplicaÃ§Ã£o
```
docker compose down
```

---

## ğŸ§¹ Limpar containers, imagens e volumes (opcional)
```
docker compose down -v --rmi all
```

---

## ğŸ“ ObservaÃ§Ãµes importantes
- As credenciais de banco sÃ£o configuradas via variÃ¡veis de ambiente no `docker-compose.yml`
- O Flyway Ã© responsÃ¡vel pela criaÃ§Ã£o e versionamento das tabelas
- A aplicaÃ§Ã£o roda com usuÃ¡rio **nÃ£o-root** dentro do container (boa prÃ¡tica de seguranÃ§a)